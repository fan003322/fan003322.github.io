<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="915px" preserveAspectRatio="none" style="width:1933px;height:915px;background:#FFFFFF;" version="1.1" viewBox="0 0 1933 915" width="1933px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="59" x="10" y="438.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="20" y="461.8154">MMU</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="116" x="119" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="129" y="99.292">a HARDWARE</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="306" x="285" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="286" x="295" y="42.9951">Sits between the CPU core and memory</text><path d="M235,94.4453 L245,94.4453 C260,94.4453 260,38.1484 275,38.1484 L285,38.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="322" x="285" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="295" y="99.292">Most often part of the physical CPU itself.</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="273" x="660" y="99.292">On ARM, it's part of the licensed core.</text><path d="M607,94.4453 L617,94.4453 C632,94.4453 632,94.4453 647,94.4453 L657,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M235,94.4453 L245,94.4453 C260,94.4453 260,94.4453 275,94.4453 L285,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="265" x="285" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="245" x="295" y="155.5889">Separate from the RAM controller</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="263" x="603" y="155.5889">DDR controller is a separate IP block</text><path d="M550,150.7422 L560,150.7422 C575,150.7422 575,150.7422 590,150.7422 L600,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M235,94.4453 L245,94.4453 C260,94.4453 260,150.7422 275,150.7422 L285,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M69,456.9688 L79,456.9688 C94,456.9688 94,94.4453 109,94.4453 L119,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="519" x="119" y="273.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="499" x="129" y="296.3311">Transparently handles all memory access from Load/Store instuctions</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="477" x="688" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="353" x="698" y="211.8857">Maps memory accesses using virtual addresses to</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100" x="1055" y="211.8857">system RAM</text><path d="M638,291.4844 L648,291.4844 C663,291.4844 663,207.0391 678,207.0391 L688,207.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="606" x="688" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="419" x="698" y="268.1826">Maps accesses using virtual addresses to memory-mapped</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="163" x="1121" y="268.1826">peripheral hardware</text><path d="M638,291.4844 L648,291.4844 C663,291.4844 663,263.3359 678,263.3359 L688,263.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="166" x="688" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="698" y="324.4795">Handles permissions</text><path d="M638,291.4844 L648,291.4844 C663,291.4844 663,319.6328 678,319.6328 L688,319.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="797" x="688" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="698" y="380.7764">Generates an exception (</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84" x="880" y="380.7764">page fault</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="964" y="380.7764">) on an</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="114" x="1016" y="380.7764">invalid access</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="341" x="1134" y="380.7764">(Unmapped address or insufficient permissions)</text><path d="M638,291.4844 L648,291.4844 C663,291.4844 663,375.9297 678,375.9297 L688,375.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M69,456.9688 L79,456.9688 C94,456.9688 94,291.4844 109,291.4844 L119,291.4844 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="368" x="119" y="635.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="296" x="129" y="658.8545">operates on basic units of memory called</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="429" y="658.8545">pages</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="458" x="537" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="10" x="547" y="437.0732">A</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="561" y="437.0732">page</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="381" x="604" y="437.0732">is a unit of memory size and aligned at the page size.</text><path d="M487,654.0078 L497,654.0078 C512,654.0078 512,432.2266 527,432.2266 L537,432.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="257" x="537" y="506.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="76" x="547" y="529.9639">Page size</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="627" y="529.9639">varies by architecture</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="478" x="844" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="458" x="854" y="493.3701">Some architectures have configurable page sizes (at build time)</text><path d="M794,525.1172 L804,525.1172 C819,525.1172 819,488.5234 834,488.5234 L844,488.5234 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="169" x="844" y="535.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="854" y="558.1123">Common page sizes:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="1066" y="530.667">ARM - 4k</text><path d="M1013,553.2656 L1023,553.2656 C1038,553.2656 1038,525.8203 1053,525.8203 L1063,525.8203 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1066" y="548.9639">ARM64 - 4k or 64k</text><path d="M1013,553.2656 L1023,553.2656 C1038,553.2656 1038,544.1172 1053,544.1172 L1063,544.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="1066" y="567.2607">MIPS - widely configurable</text><path d="M1013,553.2656 L1023,553.2656 C1038,553.2656 1038,562.4141 1053,562.4141 L1063,562.4141 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1066" y="585.5576">x86 - 4k</text><path d="M1013,553.2656 L1023,553.2656 C1038,553.2656 1038,580.7109 1053,580.7109 L1063,580.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M794,525.1172 L804,525.1172 C819,525.1172 819,553.2656 834,553.2656 L844,553.2656 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M487,654.0078 L497,654.0078 C512,654.0078 512,525.1172 527,525.1172 L537,525.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="52.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="481" x="537" y="636.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="10" x="547" y="659.1514">A</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="92" x="561" y="659.1514">page frame</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="653" y="659.1514">, or frame,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="461" x="547" y="675.4482">refers to a page-sized and page-aligned physical memory block.</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="322" x="1068" y="644.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="1078" y="667.2998">Difference between page and page frame</text><rect fill="#F1F1F1" height="52.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="229" x="1440" y="599.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="1450" y="622.8545">A page is somewhat</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="58" x="1597" y="622.8545">abstract</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1655" y="622.8545">,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="1450" y="639.1514">where a frame is</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="63" x="1572" y="639.1514">concrete</text><path d="M1390,662.4531 L1400,662.4531 C1415,662.4531 1415,626.1563 1430,626.1563 L1440,626.1563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="52.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="481" x="1440" y="672.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="1450" y="695.4482">In the kernel, the abbreviation</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1675" y="695.4482">*pfn</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1709" y="695.4482">*, for</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="158" x="1749" y="695.4482">page frame number</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1907" y="695.4482">,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="393" x="1450" y="711.7451">is often used to refer to refer to physical page frames.</text><path d="M1390,662.4531 L1400,662.4531 C1415,662.4531 1415,698.75 1430,698.75 L1440,698.75 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M1018,662.4531 L1028,662.4531 C1043,662.4531 1043,662.4531 1058,662.4531 L1068,662.4531 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M487,654.0078 L497,654.0078 C512,654.0078 512,662.4531 527,662.4531 L537,662.4531 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="222" x="537" y="801.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="547" y="824.3389">The MMU operates on pages</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="416" x="809" y="745.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="396" x="819" y="768.042">a memory map for process will contain many mappings</text><path d="M759,819.4922 L769,819.4922 C784,819.4922 784,763.1953 799,763.1953 L809,763.1953 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="313" x="809" y="801.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="819" y="824.3389">A mapping often convers multiple pages</text><path d="M759,819.4922 L769,819.4922 C784,819.4922 784,819.4922 799,819.4922 L809,819.4922 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="564" x="809" y="857.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="544" x="819" y="880.6357">The TLB holds each mapping (Virtual address, Physical address, permissions)</text><path d="M759,819.4922 L769,819.4922 C784,819.4922 784,875.7891 799,875.7891 L809,875.7891 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M487,654.0078 L497,654.0078 C512,654.0078 512,819.4922 527,819.4922 L537,819.4922 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M69,456.9688 L79,456.9688 C94,456.9688 94,654.0078 109,654.0078 L119,654.0078 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[9ac63878eee257b2a5953beb5dcc9d2e]
@startmindmap
+ <b>MMU</b>
++ a HARDWARE
+++ Sits between the CPU core and memory
+++ Most often part of the physical CPU itself.
++++_ On ARM, it's part of the licensed core.
+++ Separate from the RAM controller
++++_ DDR controller is a separate IP block
++ Transparently handles all memory access from Load/Store instuctions
+++ Maps memory accesses using virtual addresses to <b>system RAM</b>
+++ Maps accesses using virtual addresses to memory-mapped <b>peripheral hardware</b>
+++ Handles permissions
+++ Generates an exception (<b>page fault</b>) on an **invalid access** (Unmapped address or insufficient permissions)
++ operates on basic units of memory called **pages**
+++ A **page** is a unit of memory size and aligned at the page size.
+++ **Page size** varies by architecture
++++ Some architectures have configurable page sizes (at build time)
++++ Common page sizes:
+++++_ ARM - 4k
+++++_ ARM64 - 4k or 64k
+++++_ MIPS - widely configurable
+++++_ x86 - 4k
***:A **page frame**, or frame,
refers to a page-sized and page-aligned physical memory block.;
++++ Difference between page and page frame
*****:A page is somewhat <i>abstract</i>,
where a frame is <i>concrete</i>;
*****:In the kernel, the abbreviation ***pfn***, for **page frame number**,
is often used to refer to refer to physical page frames.;
+++ The MMU operates on pages
++++ a memory map for process will contain many mappings
++++ A mapping often convers multiple pages
++++ The TLB holds each mapping (Virtual address, Physical address, permissions)
@endmindmap

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>