<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="452px" preserveAspectRatio="none" style="width:2359px;height:452px;background:#FFFFFF;" version="1.1" viewBox="0 0 2359 452" width="2359px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="47" x="10" y="207.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="20" y="230.1826">TLB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="110" y="23.9951">Translation Lookaside Buffer</text><path d="M57,225.3359 L67,225.3359 C82,225.3359 82,19.1484 97,19.1484 L107,19.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="110" y="42.292">part of MMU</text><path d="M57,225.3359 L67,225.3359 C82,225.3359 82,37.4453 97,37.4453 L107,37.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="709" x="107" y="56.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="689" x="117" y="79.5889">a list of mappings from virtual to physical address space in hardware (also holds permission bits)</text><path d="M57,225.3359 L67,225.3359 C82,225.3359 82,74.7422 97,74.7422 L107,74.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="472" x="107" y="112.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="452" x="117" y="135.8857">a fixed number of entries(slots) in the TLB, which varies by CPU</text><path d="M57,225.3359 L67,225.3359 C82,225.3359 82,131.0391 97,131.0391 L107,131.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="118" x="107" y="197.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="117" y="220.3311">How it works?</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="498" x="275" y="197.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="478" x="285" y="220.3311">TLB is consulted by the MMU when the CPU access a virtual address</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="707" x="823" y="169.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="687" x="833" y="192.1826">if the virtual address is in the TLB, the MMU can look up the physical resource (RAM or hardware)</text><path d="M773,215.4844 L783,215.4844 C798,215.4844 798,187.3359 813,187.3359 L823,187.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="1051" x="823" y="225.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="833" y="248.4795">if the virtual address</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="47" x="984" y="248.4795">is not</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="252" x="1035" y="248.4795">in the TLB, the MMU will generate a</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1291" y="248.4795">page fault</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="485" x="1379" y="248.4795">exception and interrupt the CPU. (same as insufficient permissions)</text><path d="M773,215.4844 L783,215.4844 C798,215.4844 798,243.6328 813,243.6328 L823,243.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M225,215.4844 L235,215.4844 C250,215.4844 250,215.4844 265,215.4844 L275,215.4844 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M57,225.3359 L67,225.3359 C82,225.3359 82,215.4844 97,215.4844 L107,215.4844 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="134" x="107" y="338.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="117" y="361.0732">Shared memory</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="239" x="291" y="338.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="301" y="361.0732">Easily implemented with MMU.</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="499" x="580" y="281.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="479" x="590" y="304.7764">Simply map the same physical frame into two different processes.</text><path d="M530,356.2266 L540,356.2266 C555,356.2266 555,299.9297 570,299.9297 L580,299.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="359" x="580" y="366.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="339" x="590" y="389.2217">The virtual addresses need not to be the same.</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="1003" x="989" y="338.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="983" x="999" y="361.0732">If pointers to values inside a shared memory region are used, it might be important for them to have the same virtual addresses, though.</text><path d="M939,384.375 L949,384.375 C964,384.375 964,356.2266 979,356.2266 L989,356.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="1358" x="989" y="394.375"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="63" x="999" y="417.3701">mmap()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="1271" x="1066" y="417.3701">system call allows the user space process to request a specific virtual address to map the shared memory region. (the kernel may not be able to grant a mappint at this address)</text><path d="M939,384.375 L949,384.375 C964,384.375 964,412.5234 979,412.5234 L989,412.5234 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M530,356.2266 L540,356.2266 C555,356.2266 555,384.375 570,384.375 L580,384.375 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M241,356.2266 L251,356.2266 C266,356.2266 266,356.2266 281,356.2266 L291,356.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M57,225.3359 L67,225.3359 C82,225.3359 82,356.2266 97,356.2266 L107,356.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[3ab27c7beb1790645cbc39ec0e75c4e1]
@startmindmap
+ TLB
++_ Translation Lookaside Buffer
++_ part of MMU
++ a list of mappings from virtual to physical address space in hardware (also holds permission bits)
++ a fixed number of entries(slots) in the TLB, which varies by CPU
++ How it works?
+++ TLB is consulted by the MMU when the CPU access a virtual address
++++ if the virtual address is in the TLB, the MMU can look up the physical resource (RAM or hardware)
++++ if the virtual address **is not** in the TLB, the MMU will generate a **page fault** exception and interrupt the CPU. (same as insufficient permissions)
++ Shared memory
+++ Easily implemented with MMU.
++++ Simply map the same physical frame into two different processes.
++++ The virtual addresses need not to be the same.
+++++ If pointers to values inside a shared memory region are used, it might be important for them to have the same virtual addresses, though.
+++++ **mmap()** system call allows the user space process to request a specific virtual address to map the shared memory region. (the kernel may not be able to grant a mappint at this address)
@endmindmap

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>