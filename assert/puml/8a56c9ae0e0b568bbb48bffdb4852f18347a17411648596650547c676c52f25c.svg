<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1035px" preserveAspectRatio="none" style="width:2508px;height:1035px;background:#FFFFFF;" version="1.1" viewBox="0 0 2508 1035" width="2508px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="53" x="10" y="498.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="20" y="521.5186">MMU</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="116" x="113" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="123" y="99.292">a HARDWARE</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="306" x="279" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="286" x="289" y="42.9951">Sits between the CPU core and memory</text><path d="M229,94.4453 L239,94.4453 C254,94.4453 254,38.1484 269,38.1484 L279,38.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="322" x="279" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="289" y="99.292">Most often part of the physical CPU itself.</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="273" x="654" y="99.292">On ARM, it's part of the licensed core.</text><path d="M601,94.4453 L611,94.4453 C626,94.4453 626,94.4453 641,94.4453 L651,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M229,94.4453 L239,94.4453 C254,94.4453 254,94.4453 269,94.4453 L279,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="265" x="279" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="245" x="289" y="155.5889">Separate from the RAM controller</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="263" x="597" y="155.5889">DDR controller is a separate IP block</text><path d="M544,150.7422 L554,150.7422 C569,150.7422 569,150.7422 584,150.7422 L594,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M229,94.4453 L239,94.4453 C254,94.4453 254,150.7422 269,150.7422 L279,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M63,516.6719 L73,516.6719 C88,516.6719 88,94.4453 103,94.4453 L113,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="519" x="113" y="273.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="499" x="123" y="296.3311">Transparently handles all memory access from Load/Store instuctions</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="477" x="682" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="353" x="692" y="211.8857">Maps memory accesses using virtual addresses to</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100" x="1049" y="211.8857">system RAM</text><path d="M632,291.4844 L642,291.4844 C657,291.4844 657,207.0391 672,207.0391 L682,207.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="606" x="682" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="419" x="692" y="268.1826">Maps accesses using virtual addresses to memory-mapped</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="163" x="1115" y="268.1826">peripheral hardware</text><path d="M632,291.4844 L642,291.4844 C657,291.4844 657,263.3359 672,263.3359 L682,263.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="166" x="682" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="692" y="324.4795">Handles permissions</text><path d="M632,291.4844 L642,291.4844 C657,291.4844 657,319.6328 672,319.6328 L682,319.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="797" x="682" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="692" y="380.7764">Generates an exception (</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84" x="874" y="380.7764">page fault</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="958" y="380.7764">) on an</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="114" x="1010" y="380.7764">invalid access</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="341" x="1128" y="380.7764">(Unmapped address or insufficient permissions)</text><path d="M632,291.4844 L642,291.4844 C657,291.4844 657,375.9297 672,375.9297 L682,375.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M63,516.6719 L73,516.6719 C88,516.6719 88,291.4844 103,291.4844 L113,291.4844 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="368" x="113" y="695.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="296" x="123" y="718.5576">operates on basic units of memory called</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="423" y="718.5576">pages</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="458" x="531" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="10" x="541" y="437.0732">A</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="555" y="437.0732">page</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="381" x="598" y="437.0732">is a unit of memory size and aligned at the page size.</text><path d="M481,713.7109 L491,713.7109 C506,713.7109 506,432.2266 521,432.2266 L531,432.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="257" x="531" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="76" x="541" y="605.9639">Page size</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="621" y="605.9639">varies by architecture</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="478" x="838" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="458" x="848" y="493.3701">Some architectures have configurable page sizes (at build time)</text><path d="M788,601.1172 L798,601.1172 C813,601.1172 813,488.5234 828,488.5234 L838,488.5234 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="169" x="838" y="611.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="848" y="634.1123">Common page sizes:</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="83" x="1057" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="1067" y="549.667">ARM - 4k</text><path d="M1007,629.2656 L1017,629.2656 C1032,629.2656 1032,544.8203 1047,544.8203 L1057,544.8203 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="149" x="1057" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1067" y="605.9639">ARM64 - 4k or 64k</text><path d="M1007,629.2656 L1017,629.2656 C1032,629.2656 1032,601.1172 1047,601.1172 L1057,601.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="207" x="1057" y="639.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="1067" y="662.2607">MIPS - widely configurable</text><path d="M1007,629.2656 L1017,629.2656 C1032,629.2656 1032,657.4141 1047,657.4141 L1057,657.4141 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="76" x="1057" y="695.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1067" y="718.5576">x86 - 4k</text><path d="M1007,629.2656 L1017,629.2656 C1032,629.2656 1032,713.7109 1047,713.7109 L1057,713.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M788,601.1172 L798,601.1172 C813,601.1172 813,629.2656 828,629.2656 L838,629.2656 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M481,713.7109 L491,713.7109 C506,713.7109 506,601.1172 521,601.1172 L531,601.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="665" x="531" y="780.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="10" x="541" y="803.0029">A</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="92" x="555" y="803.0029">page frame</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="539" x="647" y="803.0029">, or frame, refers to a page-sized and page-aligned physical memory block.</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="322" x="1246" y="780.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="1256" y="803.0029">Difference between page and page frame</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="423" x="1618" y="751.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="403" x="1628" y="774.8545">A page is somewhat abstract, where a frame is concrete</text><path d="M1568,798.1563 L1578,798.1563 C1593,798.1563 1593,770.0078 1608,770.0078 L1618,770.0078 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="878" x="1618" y="808.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="1628" y="831.1514">In the kernel, the abbreviation</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1853" y="831.1514">*pfn</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1887" y="831.1514">*, for</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="158" x="1927" y="831.1514">page frame number</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="401" x="2085" y="831.1514">, is often used to refer to refer to physical page frames.</text><path d="M1568,798.1563 L1578,798.1563 C1593,798.1563 1593,826.3047 1608,826.3047 L1618,826.3047 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M1196,798.1563 L1206,798.1563 C1221,798.1563 1221,798.1563 1236,798.1563 L1246,798.1563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M481,713.7109 L491,713.7109 C506,713.7109 506,798.1563 521,798.1563 L531,798.1563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="222" x="531" y="920.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="541" y="943.7451">The MMU operates on pages</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="416" x="803" y="864.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="396" x="813" y="887.4482">a memory map for process will contain many mappings</text><path d="M753,938.8984 L763,938.8984 C778,938.8984 778,882.6016 793,882.6016 L803,882.6016 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="313" x="803" y="920.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="813" y="943.7451">A mapping often convers multiple pages</text><path d="M753,938.8984 L763,938.8984 C778,938.8984 778,938.8984 793,938.8984 L803,938.8984 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="564" x="803" y="977.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="544" x="813" y="1000.042">The TLB holds each mapping (Virtual address, Physical address, permissions)</text><path d="M753,938.8984 L763,938.8984 C778,938.8984 778,995.1953 793,995.1953 L803,995.1953 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M481,713.7109 L491,713.7109 C506,713.7109 506,938.8984 521,938.8984 L531,938.8984 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M63,516.6719 L73,516.6719 C88,516.6719 88,713.7109 103,713.7109 L113,713.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[fc9527d48318abdf2feea2b01a6cd941]
@startmindmap
+ MMU
++ a HARDWARE
+++ Sits between the CPU core and memory
+++ Most often part of the physical CPU itself.
++++_ On ARM, it's part of the licensed core.
+++ Separate from the RAM controller
++++_ DDR controller is a separate IP block
++ Transparently handles all memory access from Load/Store instuctions
+++ Maps memory accesses using virtual addresses to **system RAM**
+++ Maps accesses using virtual addresses to memory-mapped **peripheral hardware**
+++ Handles permissions
+++ Generates an exception (**page fault**) on an **invalid access** (Unmapped address or insufficient permissions)
++ operates on basic units of memory called **pages**
+++ A **page** is a unit of memory size and aligned at the page size.
+++ **Page size** varies by architecture
++++ Some architectures have configurable page sizes (at build time)
++++ Common page sizes:
+++++ ARM - 4k
+++++ ARM64 - 4k or 64k
+++++ MIPS - widely configurable
+++++ x86 - 4k
+++ A **page frame**, or frame, refers to a page-sized and page-aligned physical memory block.
++++ Difference between page and page frame
+++++ A page is somewhat abstract, where a frame is concrete
+++++ In the kernel, the abbreviation ***pfn***, for **page frame number**, is often used to refer to refer to physical page frames.
+++ The MMU operates on pages
++++ a memory map for process will contain many mappings
++++ A mapping often convers multiple pages
++++ The TLB holds each mapping (Virtual address, Physical address, permissions)
@endmindmap

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>