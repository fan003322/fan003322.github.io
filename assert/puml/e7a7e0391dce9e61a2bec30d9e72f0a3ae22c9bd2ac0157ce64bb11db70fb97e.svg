<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1035px" preserveAspectRatio="none" style="width:2522px;height:1035px;background:#FFFFFF;" version="1.1" viewBox="0 0 2522 1035" width="2522px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="67" x="10" y="498.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="20" y="521.5186">MMU ()</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="306" x="127" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="286" x="137" y="42.9951">Sits between the CPU core and memory</text><path d="M77,516.6719 L87,516.6719 C102,516.6719 102,38.1484 117,38.1484 L127,38.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="322" x="127" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="137" y="99.292">Most often part of the physical CPU itself.</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="293" x="499" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="273" x="509" y="99.292">On ARM, it's part of the licensed core.</text><path d="M449,94.4453 L459,94.4453 C474,94.4453 474,94.4453 489,94.4453 L499,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M77,516.6719 L87,516.6719 C102,516.6719 102,94.4453 117,94.4453 L127,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="265" x="127" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="245" x="137" y="155.5889">Separate from the RAM controller</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="283" x="442" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="263" x="452" y="155.5889">DDR controller is a separate IP block</text><path d="M392,150.7422 L402,150.7422 C417,150.7422 417,150.7422 432,150.7422 L442,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M77,516.6719 L87,516.6719 C102,516.6719 102,150.7422 117,150.7422 L127,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="519" x="127" y="273.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="499" x="137" y="296.3311">Transparently handles all memory access from Load/Store instuctions</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="477" x="696" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="353" x="706" y="211.8857">Maps memory accesses using virtual addresses to</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100" x="1063" y="211.8857">system RAM</text><path d="M646,291.4844 L656,291.4844 C671,291.4844 671,207.0391 686,207.0391 L696,207.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="606" x="696" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="419" x="706" y="268.1826">Maps accesses using virtual addresses to memory-mapped</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="163" x="1129" y="268.1826">peripheral hardware</text><path d="M646,291.4844 L656,291.4844 C671,291.4844 671,263.3359 686,263.3359 L696,263.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="166" x="696" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="706" y="324.4795">Handles permissions</text><path d="M646,291.4844 L656,291.4844 C671,291.4844 671,319.6328 686,319.6328 L696,319.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="797" x="696" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="706" y="380.7764">Generates an exception (</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84" x="888" y="380.7764">page fault</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="972" y="380.7764">) on an</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="114" x="1024" y="380.7764">invalid access</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="341" x="1142" y="380.7764">(Unmapped address or insufficient permissions)</text><path d="M646,291.4844 L656,291.4844 C671,291.4844 671,375.9297 686,375.9297 L696,375.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M77,516.6719 L87,516.6719 C102,516.6719 102,291.4844 117,291.4844 L127,291.4844 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="368" x="127" y="695.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="296" x="137" y="718.5576">operates on basic units of memory called</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="437" y="718.5576">pages</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="458" x="545" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="10" x="555" y="437.0732">A</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="569" y="437.0732">page</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="381" x="612" y="437.0732">is a unit of memory size and aligned at the page size.</text><path d="M495,713.7109 L505,713.7109 C520,713.7109 520,432.2266 535,432.2266 L545,432.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="257" x="545" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="76" x="555" y="605.9639">Page size</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="635" y="605.9639">varies by architecture</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="478" x="852" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="458" x="862" y="493.3701">Some architectures have configurable page sizes (at build time)</text><path d="M802,601.1172 L812,601.1172 C827,601.1172 827,488.5234 842,488.5234 L852,488.5234 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="169" x="852" y="611.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="862" y="634.1123">Common page sizes:</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="83" x="1071" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="1081" y="549.667">ARM - 4k</text><path d="M1021,629.2656 L1031,629.2656 C1046,629.2656 1046,544.8203 1061,544.8203 L1071,544.8203 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="149" x="1071" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1081" y="605.9639">ARM64 - 4k or 64k</text><path d="M1021,629.2656 L1031,629.2656 C1046,629.2656 1046,601.1172 1061,601.1172 L1071,601.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="207" x="1071" y="639.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="1081" y="662.2607">MIPS - widely configurable</text><path d="M1021,629.2656 L1031,629.2656 C1046,629.2656 1046,657.4141 1061,657.4141 L1071,657.4141 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="76" x="1071" y="695.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1081" y="718.5576">x86 - 4k</text><path d="M1021,629.2656 L1031,629.2656 C1046,629.2656 1046,713.7109 1061,713.7109 L1071,713.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M802,601.1172 L812,601.1172 C827,601.1172 827,629.2656 842,629.2656 L852,629.2656 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M495,713.7109 L505,713.7109 C520,713.7109 520,601.1172 535,601.1172 L545,601.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="665" x="545" y="780.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="10" x="555" y="803.0029">A</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="92" x="569" y="803.0029">page frame</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="539" x="661" y="803.0029">, or frame, refers to a page-sized and page-aligned physical memory block.</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="322" x="1260" y="780.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="1270" y="803.0029">Difference between page and page frame</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="423" x="1632" y="751.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="403" x="1642" y="774.8545">A page is somewhat abstract, where a frame is concrete</text><path d="M1582,798.1563 L1592,798.1563 C1607,798.1563 1607,770.0078 1622,770.0078 L1632,770.0078 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="878" x="1632" y="808.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="1642" y="831.1514">In the kernel, the abbreviation</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1867" y="831.1514">*pfn</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1901" y="831.1514">*, for</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="158" x="1941" y="831.1514">page frame number</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="401" x="2099" y="831.1514">, is often used to refer to refer to physical page frames.</text><path d="M1582,798.1563 L1592,798.1563 C1607,798.1563 1607,826.3047 1622,826.3047 L1632,826.3047 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M1210,798.1563 L1220,798.1563 C1235,798.1563 1235,798.1563 1250,798.1563 L1260,798.1563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M495,713.7109 L505,713.7109 C520,713.7109 520,798.1563 535,798.1563 L545,798.1563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="222" x="545" y="920.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="555" y="943.7451">The MMU operates on pages</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="416" x="817" y="864.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="396" x="827" y="887.4482">a memory map for process will contain many mappings</text><path d="M767,938.8984 L777,938.8984 C792,938.8984 792,882.6016 807,882.6016 L817,882.6016 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="313" x="817" y="920.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="827" y="943.7451">A mapping often convers multiple pages</text><path d="M767,938.8984 L777,938.8984 C792,938.8984 792,938.8984 807,938.8984 L817,938.8984 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="564" x="817" y="977.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="544" x="827" y="1000.042">The TLB holds each mapping (Virtual address, Physical address, permissions)</text><path d="M767,938.8984 L777,938.8984 C792,938.8984 792,995.1953 807,995.1953 L817,995.1953 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M495,713.7109 L505,713.7109 C520,713.7109 520,938.8984 535,938.8984 L545,938.8984 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M77,516.6719 L87,516.6719 C102,516.6719 102,713.7109 117,713.7109 L127,713.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[c3a5390cfd41827b400af38638d89bf8]
@startmindmap
+ MMU ()
++ Sits between the CPU core and memory
++ Most often part of the physical CPU itself.
+++ On ARM, it's part of the licensed core.
++ Separate from the RAM controller
+++ DDR controller is a separate IP block
++ Transparently handles all memory access from Load/Store instuctions
+++ Maps memory accesses using virtual addresses to **system RAM**
+++ Maps accesses using virtual addresses to memory-mapped **peripheral hardware**
+++ Handles permissions
+++ Generates an exception (**page fault**) on an **invalid access** (Unmapped address or insufficient permissions)
++ operates on basic units of memory called **pages**
+++ A **page** is a unit of memory size and aligned at the page size.
+++ **Page size** varies by architecture
++++ Some architectures have configurable page sizes (at build time)
++++ Common page sizes:
+++++ ARM - 4k
+++++ ARM64 - 4k or 64k
+++++ MIPS - widely configurable
+++++ x86 - 4k
+++ A **page frame**, or frame, refers to a page-sized and page-aligned physical memory block.
++++ Difference between page and page frame
+++++ A page is somewhat abstract, where a frame is concrete
+++++ In the kernel, the abbreviation ***pfn***, for **page frame number**, is often used to refer to refer to physical page frames.
+++ The MMU operates on pages
++++ a memory map for process will contain many mappings
++++ A mapping often convers multiple pages
++++ The TLB holds each mapping (Virtual address, Physical address, permissions)
@endmindmap

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>