<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="967px" preserveAspectRatio="none" style="width:1572px;height:967px;background:#FFFFFF;" version="1.1" viewBox="0 0 1572 967" width="1572px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="135" x="10" y="464.7461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="20" y="487.7412">Virtural Memory</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="389" x="195" y="56.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="369" x="205" y="79.5889">Defination: A system that uses an address mapping</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="398" x="634" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="378" x="644" y="42.9951">Maps virtual address space to physical address space</text><path d="M584,74.7422 L594,74.7422 C609,74.7422 609,38.1484 624,38.1484 L634,38.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="413" x="637" y="80.292">和Single Addressing相比，virtual address不是真实的物理地址</text><path d="M584,74.7422 L594,74.7422 C609,74.7422 609,75.4453 624,75.4453 L634,75.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="637" y="116.8857">硬件资源</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="746" y="98.5889">physical RAM</text><path d="M693,112.0391 L703,112.0391 C718,112.0391 718,93.7422 733,93.7422 L743,93.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="746" y="116.8857">hardware devices</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="923" y="98.5889">PCI devices</text><path d="M870,112.0391 L880,112.0391 C895,112.0391 895,93.7422 910,93.7422 L920,93.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="923" y="116.8857">GPU RAM</text><path d="M870,112.0391 L880,112.0391 C895,112.0391 895,112.0391 910,112.0391 L920,112.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="923" y="135.1826">On-SoC IP blocks</text><path d="M870,112.0391 L880,112.0391 C895,112.0391 895,130.3359 910,130.3359 L920,130.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M693,112.0391 L703,112.0391 C718,112.0391 718,112.0391 733,112.0391 L743,112.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M584,74.7422 L594,74.7422 C609,74.7422 609,112.0391 624,112.0391 L634,112.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M145,482.8945 L155,482.8945 C170,482.8945 170,74.7422 185,74.7422 L195,74.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="104" x="195" y="304.3008"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="205" y="327.2959">Advantages</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="656" x="349" y="177.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="411" x="359" y="200.6279">Each processes can have a different memory mapping -&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="221" x="774" y="200.6279">Built-in memory protection</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="505" x="1055" y="149.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="485" x="1065" y="172.4795">One process's RAM is inaccessible (and invisible) to other processes</text><path d="M1005,195.7813 L1015,195.7813 C1030,195.7813 1030,167.6328 1045,167.6328 L1055,167.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="356" x="1055" y="205.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="336" x="1065" y="228.7764">kernel RAM is invisible to user space processes</text><path d="M1005,195.7813 L1015,195.7813 C1030,195.7813 1030,223.9297 1045,223.9297 L1055,223.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M299,322.4492 L309,322.4492 C324,322.4492 324,195.7813 339,195.7813 L349,195.7813 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="183" x="349" y="233.9297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="359" y="256.9248">Memory can be moved</text><path d="M299,322.4492 L309,322.4492 C324,322.4492 324,252.0781 339,252.0781 L349,252.0781 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="251" x="349" y="290.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="231" x="359" y="313.2217">Memory can be swapped to disk</text><path d="M299,322.4492 L309,322.4492 C324,322.4492 324,308.375 339,308.375 L349,308.375 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="518" x="349" y="346.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="498" x="359" y="369.5186">Map hardware device memory to a process's address space (GPU E.g.)</text><path d="M299,322.4492 L309,322.4492 C324,322.4492 324,364.6719 339,364.6719 L349,364.6719 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="611" x="349" y="402.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="461" x="359" y="425.8154">Physical RAM can be mapped into multiple processes at once -&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="126" x="824" y="425.8154">Shared memory</text><path d="M299,322.4492 L309,322.4492 C324,322.4492 324,420.9688 339,420.9688 L349,420.9688 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="462" x="349" y="459.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="442" x="359" y="482.1123">Access permissions for memory regions (read, write, execute)</text><path d="M299,322.4492 L309,322.4492 C324,322.4492 324,477.2656 339,477.2656 L349,477.2656 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M145,482.8945 L155,482.8945 C170,482.8945 170,322.4492 185,322.4492 L195,322.4492 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="161" x="195" y="599.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="205" y="622.8545">Two address spaces</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="301" x="406" y="543.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="416" y="566.5576">Physical addresses (used by</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="76" x="616" y="566.5576">hardware</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="692" y="566.5576">)</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="53" x="757" y="515.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="767" y="538.4092">DMA</text><path d="M707,561.7109 L717,561.7109 C732,561.7109 732,533.5625 747,533.5625 L757,533.5625 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="102" x="757" y="571.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="767" y="594.7061">peripherals</text><path d="M707,561.7109 L717,561.7109 C732,561.7109 732,589.8594 747,589.8594 L757,589.8594 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M356,618.0078 L366,618.0078 C381,618.0078 381,561.7109 396,561.7109 L406,561.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="288" x="406" y="656.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186" x="416" y="679.1514">Virtual addresses (used by</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="73" x="606" y="679.1514">software</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="679" y="679.1514">)</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="229" x="744" y="628.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="754" y="651.0029">load/store instructions (RISC)</text><path d="M694,674.3047 L704,674.3047 C719,674.3047 719,646.1563 734,646.1563 L744,646.1563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="313" x="744" y="684.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="754" y="707.2998">Any instruction accessing memory (CISC)</text><path d="M694,674.3047 L704,674.3047 C719,674.3047 719,702.4531 734,702.4531 L744,702.4531 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M356,618.0078 L366,618.0078 C381,618.0078 381,674.3047 396,674.3047 L406,674.3047 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M145,482.8945 L155,482.8945 C170,482.8945 170,618.0078 185,618.0078 L195,618.0078 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="330" x="195" y="825.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="267" x="205" y="848.042">Mapping is performed in hardware -&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="476" y="848.042">MMU</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="523" x="575" y="740.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="503" x="585" y="763.5967">No performance penalty for accessing *already-mapped* RAM regions</text><path d="M525,843.1953 L535,843.1953 C550,843.1953 550,758.75 565,758.75 L575,758.75 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="311" x="575" y="796.8984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="291" x="585" y="819.8936">Permissions are handled without penalty</text><path d="M525,843.1953 L535,843.1953 C550,843.1953 550,815.0469 565,815.0469 L575,815.0469 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="572" x="575" y="853.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="552" x="585" y="876.1904">The same CPU instructions are used for accessing RAM and mapped hardware</text><path d="M525,843.1953 L535,843.1953 C550,843.1953 550,871.3438 565,871.3438 L575,871.3438 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="925" x="575" y="909.4922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="905" x="585" y="932.4873">Software, during its normal operation, will only use virtual addressed. (include kernel and user space, this is not true of all OS's)</text><path d="M525,843.1953 L535,843.1953 C550,843.1953 550,927.6406 565,927.6406 L575,927.6406 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M145,482.8945 L155,482.8945 C170,482.8945 170,843.1953 185,843.1953 L195,843.1953 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[e60ca19dfd03da1e21f626b2a88d4132]
@startmindmap
+ Virtural Memory
++ Defination: A system that uses an address mapping
+++ Maps virtual address space to physical address space
+++_ 和Single Addressing相比，virtual address不是真实的物理地址
+++_ 硬件资源
++++_ physical RAM
++++_ hardware devices
+++++_ PCI devices
+++++_ GPU RAM
+++++_ On-SoC IP blocks
++ Advantages
+++ Each processes can have a different memory mapping -> **Built-in memory protection**
++++ One process's RAM is inaccessible (and invisible) to other processes
++++ kernel RAM is invisible to user space processes
+++ Memory can be moved
+++ Memory can be swapped to disk
+++ Map hardware device memory to a process's address space (GPU E.g.)
+++ Physical RAM can be mapped into multiple processes at once -> **Shared memory**
+++ Access permissions for memory regions (read, write, execute)
++ Two address spaces
+++ Physical addresses (used by **hardware**)
++++ DMA
++++ peripherals
+++ Virtual addresses (used by **software**)
++++ load/store instructions (RISC)
++++ Any instruction accessing memory (CISC)
++ Mapping is performed in hardware -> **MMU**
+++ No performance penalty for accessing *already-mapped* RAM regions
+++ Permissions are handled without penalty
+++ The same CPU instructions are used for accessing RAM and mapped hardware
+++ Software, during its normal operation, will only use virtual addressed. (include kernel and user space, this is not true of all OS's)
@endmindmap

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>