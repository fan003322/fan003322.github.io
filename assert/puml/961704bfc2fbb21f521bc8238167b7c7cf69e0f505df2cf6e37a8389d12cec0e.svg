<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1035px" preserveAspectRatio="none" style="width:2514px;height:1035px;background:#FFFFFF;" version="1.1" viewBox="0 0 2514 1035" width="2514px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="59" x="10" y="498.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="20" y="521.5186">MMU</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="116" x="119" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="129" y="99.292">a HARDWARE</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="306" x="285" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="286" x="295" y="42.9951">Sits between the CPU core and memory</text><path d="M235,94.4453 L245,94.4453 C260,94.4453 260,38.1484 275,38.1484 L285,38.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="322" x="285" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="295" y="99.292">Most often part of the physical CPU itself.</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="273" x="660" y="99.292">On ARM, it's part of the licensed core.</text><path d="M607,94.4453 L617,94.4453 C632,94.4453 632,94.4453 647,94.4453 L657,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M235,94.4453 L245,94.4453 C260,94.4453 260,94.4453 275,94.4453 L285,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="265" x="285" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="245" x="295" y="155.5889">Separate from the RAM controller</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="263" x="603" y="155.5889">DDR controller is a separate IP block</text><path d="M550,150.7422 L560,150.7422 C575,150.7422 575,150.7422 590,150.7422 L600,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M235,94.4453 L245,94.4453 C260,94.4453 260,150.7422 275,150.7422 L285,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M69,516.6719 L79,516.6719 C94,516.6719 94,94.4453 109,94.4453 L119,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="519" x="119" y="273.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="499" x="129" y="296.3311">Transparently handles all memory access from Load/Store instuctions</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="477" x="688" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="353" x="698" y="211.8857">Maps memory accesses using virtual addresses to</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100" x="1055" y="211.8857">system RAM</text><path d="M638,291.4844 L648,291.4844 C663,291.4844 663,207.0391 678,207.0391 L688,207.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="606" x="688" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="419" x="698" y="268.1826">Maps accesses using virtual addresses to memory-mapped</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="163" x="1121" y="268.1826">peripheral hardware</text><path d="M638,291.4844 L648,291.4844 C663,291.4844 663,263.3359 678,263.3359 L688,263.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="166" x="688" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="698" y="324.4795">Handles permissions</text><path d="M638,291.4844 L648,291.4844 C663,291.4844 663,319.6328 678,319.6328 L688,319.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="797" x="688" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="698" y="380.7764">Generates an exception (</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84" x="880" y="380.7764">page fault</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="964" y="380.7764">) on an</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="114" x="1016" y="380.7764">invalid access</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="341" x="1134" y="380.7764">(Unmapped address or insufficient permissions)</text><path d="M638,291.4844 L648,291.4844 C663,291.4844 663,375.9297 678,375.9297 L688,375.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M69,516.6719 L79,516.6719 C94,516.6719 94,291.4844 109,291.4844 L119,291.4844 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="368" x="119" y="695.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="296" x="129" y="718.5576">operates on basic units of memory called</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="429" y="718.5576">pages</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="458" x="537" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="10" x="547" y="437.0732">A</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="561" y="437.0732">page</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="381" x="604" y="437.0732">is a unit of memory size and aligned at the page size.</text><path d="M487,713.7109 L497,713.7109 C512,713.7109 512,432.2266 527,432.2266 L537,432.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="257" x="537" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="76" x="547" y="605.9639">Page size</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="627" y="605.9639">varies by architecture</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="478" x="844" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="458" x="854" y="493.3701">Some architectures have configurable page sizes (at build time)</text><path d="M794,601.1172 L804,601.1172 C819,601.1172 819,488.5234 834,488.5234 L844,488.5234 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="169" x="844" y="611.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="854" y="634.1123">Common page sizes:</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="83" x="1063" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="1073" y="549.667">ARM - 4k</text><path d="M1013,629.2656 L1023,629.2656 C1038,629.2656 1038,544.8203 1053,544.8203 L1063,544.8203 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="149" x="1063" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1073" y="605.9639">ARM64 - 4k or 64k</text><path d="M1013,629.2656 L1023,629.2656 C1038,629.2656 1038,601.1172 1053,601.1172 L1063,601.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="207" x="1063" y="639.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="1073" y="662.2607">MIPS - widely configurable</text><path d="M1013,629.2656 L1023,629.2656 C1038,629.2656 1038,657.4141 1053,657.4141 L1063,657.4141 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="76" x="1063" y="695.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1073" y="718.5576">x86 - 4k</text><path d="M1013,629.2656 L1023,629.2656 C1038,629.2656 1038,713.7109 1053,713.7109 L1063,713.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M794,601.1172 L804,601.1172 C819,601.1172 819,629.2656 834,629.2656 L844,629.2656 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M487,713.7109 L497,713.7109 C512,713.7109 512,601.1172 527,601.1172 L537,601.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="665" x="537" y="780.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="10" x="547" y="803.0029">A</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="92" x="561" y="803.0029">page frame</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="539" x="653" y="803.0029">, or frame, refers to a page-sized and page-aligned physical memory block.</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="322" x="1252" y="780.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="1262" y="803.0029">Difference between page and page frame</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="423" x="1624" y="751.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="403" x="1634" y="774.8545">A page is somewhat abstract, where a frame is concrete</text><path d="M1574,798.1563 L1584,798.1563 C1599,798.1563 1599,770.0078 1614,770.0078 L1624,770.0078 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="878" x="1624" y="808.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="1634" y="831.1514">In the kernel, the abbreviation</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="1859" y="831.1514">*pfn</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1893" y="831.1514">*, for</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="158" x="1933" y="831.1514">page frame number</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="401" x="2091" y="831.1514">, is often used to refer to refer to physical page frames.</text><path d="M1574,798.1563 L1584,798.1563 C1599,798.1563 1599,826.3047 1614,826.3047 L1624,826.3047 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M1202,798.1563 L1212,798.1563 C1227,798.1563 1227,798.1563 1242,798.1563 L1252,798.1563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M487,713.7109 L497,713.7109 C512,713.7109 512,798.1563 527,798.1563 L537,798.1563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="222" x="537" y="920.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="547" y="943.7451">The MMU operates on pages</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="416" x="809" y="864.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="396" x="819" y="887.4482">a memory map for process will contain many mappings</text><path d="M759,938.8984 L769,938.8984 C784,938.8984 784,882.6016 799,882.6016 L809,882.6016 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="313" x="809" y="920.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="819" y="943.7451">A mapping often convers multiple pages</text><path d="M759,938.8984 L769,938.8984 C784,938.8984 784,938.8984 799,938.8984 L809,938.8984 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="564" x="809" y="977.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="544" x="819" y="1000.042">The TLB holds each mapping (Virtual address, Physical address, permissions)</text><path d="M759,938.8984 L769,938.8984 C784,938.8984 784,995.1953 799,995.1953 L809,995.1953 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M487,713.7109 L497,713.7109 C512,713.7109 512,938.8984 527,938.8984 L537,938.8984 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M69,516.6719 L79,516.6719 C94,516.6719 94,713.7109 109,713.7109 L119,713.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[d53e45036fa35aafe27d06c2741896ed]
@startmindmap
+ <b>MMU</b>
++ a HARDWARE
+++ Sits between the CPU core and memory
+++ Most often part of the physical CPU itself.
++++_ On ARM, it's part of the licensed core.
+++ Separate from the RAM controller
++++_ DDR controller is a separate IP block
++ Transparently handles all memory access from Load/Store instuctions
+++ Maps memory accesses using virtual addresses to <b>system RAM</b>
+++ Maps accesses using virtual addresses to memory-mapped **peripheral hardware**
+++ Handles permissions
+++ Generates an exception (**page fault**) on an **invalid access** (Unmapped address or insufficient permissions)
++ operates on basic units of memory called **pages**
+++ A **page** is a unit of memory size and aligned at the page size.
+++ **Page size** varies by architecture
++++ Some architectures have configurable page sizes (at build time)
++++ Common page sizes:
+++++ ARM - 4k
+++++ ARM64 - 4k or 64k
+++++ MIPS - widely configurable
+++++ x86 - 4k
+++ A **page frame**, or frame, refers to a page-sized and page-aligned physical memory block.
++++ Difference between page and page frame
+++++ A page is somewhat abstract, where a frame is concrete
+++++ In the kernel, the abbreviation ***pfn***, for **page frame number**, is often used to refer to refer to physical page frames.
+++ The MMU operates on pages
++++ a memory map for process will contain many mappings
++++ A mapping often convers multiple pages
++++ The TLB holds each mapping (Virtual address, Physical address, permissions)
@endmindmap

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>