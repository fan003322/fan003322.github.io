<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="583px" preserveAspectRatio="none" style="width:1548px;height:583px;background:#FFFFFF;" version="1.1" viewBox="0 0 1548 583" width="1548px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="47" x="10" y="272.6265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="20" y="295.6216">TLB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="110" y="23.9951">Translation Lookaside Buffer</text><path d="M57,290.775 L67,290.775 C82,290.775 82,19.1484 97,19.1484 L107,19.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="110" y="42.292">part of MMU</text><path d="M57,290.775 L67,290.775 C82,290.775 82,37.4453 97,37.4453 L107,37.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="709" x="107" y="56.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="689" x="117" y="79.5889">a list of mappings from virtual to physical address space in hardware (also holds permission bits)</text><path d="M57,290.775 L67,290.775 C82,290.775 82,74.7422 97,74.7422 L107,74.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="472" x="107" y="112.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="452" x="117" y="135.8857">a fixed number of entries(slots) in the TLB, which varies by CPU</text><path d="M57,290.775 L67,290.775 C82,290.775 82,131.0391 97,131.0391 L107,131.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="118" x="107" y="221.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="117" y="244.7764">How it works?</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="498" x="275" y="221.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="478" x="285" y="244.7764">TLB is consulted by the MMU when the CPU access a virtual address</text><rect fill="#F1F1F1" height="52.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="460" x="823" y="169.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="243" x="833" y="192.1826">if the virtual address is in the TLB,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="440" x="833" y="208.4795">the MMU can look up the physical resource (RAM or hardware)</text><path d="M773,239.9297 L783,239.9297 C798,239.9297 798,195.4844 813,195.4844 L823,195.4844 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="522" x="823" y="241.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="833" y="264.7764">if the virtual address</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="47" x="984" y="264.7764">is not</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1035" y="264.7764">in the TLB,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171" x="833" y="281.0732">the MMU will generate a</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1008" y="281.0732">page fault</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="239" x="1096" y="281.0732">exception and interrupt the CPU.</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="242" x="833" y="297.3701">(same as insufficient permissions)</text><path d="M773,239.9297 L783,239.9297 C798,239.9297 798,276.2266 813,276.2266 L823,276.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M225,239.9297 L235,239.9297 C250,239.9297 250,239.9297 265,239.9297 L275,239.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M57,290.775 L67,290.775 C82,290.775 82,239.9297 97,239.9297 L107,239.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#ADD8E6" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="134" x="107" y="427.9625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="117" y="450.9576">Shared memory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="294" y="450.9576">Easily implemented with MMU.</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="499" x="563" y="330.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="479" x="573" y="353.667">Simply map the same physical frame into two different processes.</text><path d="M513,446.1109 L523,446.1109 C538,446.1109 538,348.8203 553,348.8203 L563,348.8203 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="359" x="563" y="456.1109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="339" x="573" y="479.106">The virtual addresses need not to be the same.</text><rect fill="#F1F1F1" height="52.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="564" x="972" y="386.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="435" x="982" y="409.9639">If pointers to values inside a shared memory region are used,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="544" x="982" y="426.2607">it might be important for them to have the same virtual addresses, though.</text><path d="M922,474.2593 L932,474.2593 C947,474.2593 947,413.2656 962,413.2656 L972,413.2656 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="101.9874" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="531" x="972" y="459.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="982" y="482.5576">Â </text><text fill="#000000" font-family="monospace" font-size="14" lengthAdjust="spacing" textLength="48" x="982" y="498.8233">mmap()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="296" x="982" y="515.6544">system call allows the user space process</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="511" x="982" y="531.9513">to request a specific virtual address to map the shared memory region.</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="456" x="982" y="548.2482">(the kernel may not be able to grant a mappint at this address)</text><path d="M922,474.2593 L932,474.2593 C947,474.2593 947,510.5562 962,510.5562 L972,510.5562 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M513,446.1109 L523,446.1109 C538,446.1109 538,474.2593 553,474.2593 L563,474.2593 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M241,446.1109 L251,446.1109 C266,446.1109 266,446.1109 281,446.1109 L291,446.1109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M57,290.775 L67,290.775 C82,290.775 82,446.1109 97,446.1109 L107,446.1109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[21fee911b05b56b3743bc9258b766207]
@startmindmap
+ TLB
++_ Translation Lookaside Buffer
++_ part of MMU
++ a list of mappings from virtual to physical address space in hardware (also holds permission bits)
++ a fixed number of entries(slots) in the TLB, which varies by CPU
++ How it works?
+++ TLB is consulted by the MMU when the CPU access a virtual address
****:if the virtual address is in the TLB,
the MMU can look up the physical resource (RAM or hardware);
****:if the virtual address **is not** in the TLB,
the MMU will generate a **page fault** exception and interrupt the CPU.
(same as insufficient permissions);
++[#lightblue] Shared memory
+++_ Easily implemented with MMU.
++++ Simply map the same physical frame into two different processes.
++++ The virtual addresses need not to be the same.
*****:If pointers to values inside a shared memory region are used,
it might be important for them to have the same virtual addresses, though.;
*****:
<code>
mmap()
</code>
system call allows the user space process
to request a specific virtual address to map the shared memory region.
(the kernel may not be able to grant a mappint at this address);
@endmindmap

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>