<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1086px" preserveAspectRatio="none" style="width:1326px;height:1086px;background:#FFFFFF;" version="1.1" viewBox="0 0 1326 1086" width="1326px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="135" x="10" y="524.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="20" y="547.1123">Virtural Memory</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="389" x="195" y="85.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="369" x="205" y="108.4404">Defination: A system that uses an address mapping</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="398" x="634" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="378" x="644" y="42.9951">Maps virtual address space to physical address space</text><path d="M584,103.5938 L594,103.5938 C609,103.5938 609,38.1484 624,38.1484 L634,38.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="413" x="637" y="80.292">和Single Addressing相比，virtual address不是真实的物理地址</text><path d="M584,103.5938 L594,103.5938 C609,103.5938 609,75.4453 624,75.4453 L634,75.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="76" x="634" y="122.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="644" y="145.7373">硬件资源</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="114" x="760" y="94.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="770" y="117.5889">physical RAM</text><path d="M710,140.8906 L720,140.8906 C735,140.8906 735,112.7422 750,112.7422 L760,112.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="144" x="760" y="150.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="770" y="173.8857">hardware devices</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="957" y="155.5889">PCI devices</text><path d="M904,169.0391 L914,169.0391 C929,169.0391 929,150.7422 944,150.7422 L954,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="957" y="173.8857">GPU RAM</text><path d="M904,169.0391 L914,169.0391 C929,169.0391 929,169.0391 944,169.0391 L954,169.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="957" y="192.1826">On-SoC IP blocks</text><path d="M904,169.0391 L914,169.0391 C929,169.0391 929,187.3359 944,187.3359 L954,187.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M710,140.8906 L720,140.8906 C735,140.8906 735,169.0391 750,169.0391 L760,169.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M584,103.5938 L594,103.5938 C609,103.5938 609,140.8906 624,140.8906 L634,140.8906 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M145,542.2656 L155,542.2656 C170,542.2656 170,103.5938 185,103.5938 L195,103.5938 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="104" x="195" y="366.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="205" y="389.0732">Advantages</text><rect fill="#F1F1F1" height="52.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="410" x="349" y="227.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="390" x="359" y="250.1826">Each processes can have a different memory mapping</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="375" y="266.4795">--&gt; [</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="221" x="407" y="266.4795">Built-in memory protection</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="628" y="266.4795">]</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="505" x="809" y="207.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="485" x="819" y="230.1826">One process's RAM is inaccessible (and invisible) to other processes</text><path d="M759,253.4844 L769,253.4844 C784,253.4844 784,225.3359 799,225.3359 L809,225.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="356" x="809" y="263.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="336" x="819" y="286.4795">kernel RAM is invisible to user space processes</text><path d="M759,253.4844 L769,253.4844 C784,253.4844 784,281.6328 799,281.6328 L809,281.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M299,384.2266 L309,384.2266 C324,384.2266 324,253.4844 339,253.4844 L349,253.4844 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="183" x="349" y="299.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="359" y="322.7764">Memory can be moved</text><path d="M299,384.2266 L309,384.2266 C324,384.2266 324,317.9297 339,317.9297 L349,317.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="251" x="349" y="356.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="231" x="359" y="379.0732">Memory can be swapped to disk</text><path d="M299,384.2266 L309,384.2266 C324,384.2266 324,374.2266 339,374.2266 L349,374.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="518" x="349" y="412.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="498" x="359" y="435.3701">Map hardware device memory to a process's address space (GPU E.g.)</text><path d="M299,384.2266 L309,384.2266 C324,384.2266 324,430.5234 339,430.5234 L349,430.5234 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="631" x="349" y="468.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="480" x="359" y="491.667">Physical RAM can be mapped into multiple processes at once  --&gt; [</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="126" x="839" y="491.667">Shared memory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="965" y="491.667">]</text><path d="M299,384.2266 L309,384.2266 C324,384.2266 324,486.8203 339,486.8203 L349,486.8203 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="469" x="349" y="524.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="449" x="359" y="547.9639">Access permissions for memory regions (Read, Write, Execute)</text><path d="M299,384.2266 L309,384.2266 C324,384.2266 324,543.1172 339,543.1172 L349,543.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M145,542.2656 L155,542.2656 C170,542.2656 170,384.2266 185,384.2266 L195,384.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="161" x="195" y="684.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="205" y="707.0029">Two address spaces</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="152" x="406" y="618.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="416" y="641.5576">Physical addresses</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="611" y="585.2607">(used by</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="76" x="675" y="585.2607">hardware</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="751" y="585.2607">)</text><path d="M558,636.7109 L568,636.7109 C583,636.7109 583,580.4141 598,580.4141 L608,580.4141 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="53" x="608" y="599.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="618" y="622.5576">DMA</text><path d="M558,636.7109 L568,636.7109 C583,636.7109 583,617.7109 598,617.7109 L608,617.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="102" x="608" y="655.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="618" y="678.8545">peripherals</text><path d="M558,636.7109 L568,636.7109 C583,636.7109 583,674.0078 598,674.0078 L608,674.0078 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M356,702.1563 L366,702.1563 C381,702.1563 381,636.7109 396,636.7109 L406,636.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="142" x="406" y="749.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="416" y="772.4482">Virtual addresses</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="601" y="716.1514">(used by</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="73" x="665" y="716.1514">software</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="738" y="716.1514">)</text><path d="M548,767.6016 L558,767.6016 C573,767.6016 573,711.3047 588,711.3047 L598,711.3047 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="229" x="598" y="730.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="608" y="753.4482">load/store instructions (RISC)</text><path d="M548,767.6016 L558,767.6016 C573,767.6016 573,748.6016 588,748.6016 L598,748.6016 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="313" x="598" y="786.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="608" y="809.7451">Any instruction accessing memory (CISC)</text><path d="M548,767.6016 L558,767.6016 C573,767.6016 573,804.8984 588,804.8984 L598,804.8984 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M356,702.1563 L366,702.1563 C381,702.1563 381,767.6016 396,767.6016 L406,767.6016 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M145,542.2656 L155,542.2656 C170,542.2656 170,702.1563 185,702.1563 L195,702.1563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="340" x="195" y="935.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="277" x="205" y="958.6357">Mapping is performed in hardware  --&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="486" y="958.6357">MMU</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="509" x="585" y="843.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="274" x="595" y="866.042">No performance penalty for accessing</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="118" x="873" y="866.042">already-mapped</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="995" y="866.042">RAM regions</text><path d="M535,953.7891 L545,953.7891 C560,953.7891 560,861.1953 575,861.1953 L585,861.1953 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="311" x="585" y="899.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="291" x="595" y="922.3389">Permissions are handled without penalty</text><path d="M535,953.7891 L545,953.7891 C560,953.7891 560,917.4922 575,917.4922 L585,917.4922 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="572" x="585" y="955.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="552" x="595" y="978.6357">The same CPU instructions are used for accessing RAM and mapped hardware</text><path d="M535,953.7891 L545,953.7891 C560,953.7891 560,973.7891 575,973.7891 L585,973.7891 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="52.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="513" x="585" y="1011.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="493" x="595" y="1034.9326">Software, during its normal operation, will only use virtual addressed.</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="408" x="595" y="1051.2295">(include kernel and user space, this is not true of all OS's)</text><path d="M535,953.7891 L545,953.7891 C560,953.7891 560,1038.2344 575,1038.2344 L585,1038.2344 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M145,542.2656 L155,542.2656 C170,542.2656 170,953.7891 185,953.7891 L195,953.7891 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[6ef3f258071c4e6bb8a2fdc0a71e3cb6]
@startmindmap
+ Virtural Memory
++ Defination: A system that uses an address mapping
+++ Maps virtual address space to physical address space
+++_ 和Single Addressing相比，virtual address不是真实的物理地址
+++ 硬件资源
++++ physical RAM
++++ hardware devices
+++++_ PCI devices
+++++_ GPU RAM
+++++_ On-SoC IP blocks
++ Advantages
***:Each processes can have a different memory mapping
    - -> [**Built-in memory protection**];
++++ One process's RAM is inaccessible (and invisible) to other processes
++++ kernel RAM is invisible to user space processes
+++ Memory can be moved
+++ Memory can be swapped to disk
+++ Map hardware device memory to a process's address space (GPU E.g.)
+++ Physical RAM can be mapped into multiple processes at once  - -> [**Shared memory**]
+++ Access permissions for memory regions (Read, Write, Execute)
++ Two address spaces
+++ Physical addresses
++++_ (used by **hardware**)
++++ DMA
++++ peripherals
+++ Virtual addresses
++++_ (used by **software**)
++++ load/store instructions (RISC)
++++ Any instruction accessing memory (CISC)
++ Mapping is performed in hardware  - -> **MMU**
+++ No performance penalty for accessing <i>already-mapped</i> RAM regions
+++ Permissions are handled without penalty
+++ The same CPU instructions are used for accessing RAM and mapped hardware
***:Software, during its normal operation, will only use virtual addressed.
(include kernel and user space, this is not true of all OS's);
@endmindmap

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>