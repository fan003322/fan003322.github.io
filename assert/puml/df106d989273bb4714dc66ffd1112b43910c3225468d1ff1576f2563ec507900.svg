<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1035px" preserveAspectRatio="none" style="width:2713px;height:1035px;background:#FFFFFF;" version="1.1" viewBox="0 0 2713 1035" width="2713px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="258" x="10" y="498.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="238" x="20" y="521.5186">MMU (Memory-Management Unit)</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="306" x="318" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="286" x="328" y="42.9951">Sits between the CPU core and memory</text><path d="M268,516.6719 L278,516.6719 C293,516.6719 293,38.1484 308,38.1484 L318,38.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="322" x="318" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="328" y="99.292">Most often part of the physical CPU itself.</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="293" x="690" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="273" x="700" y="99.292">On ARM, it's part of the licensed core.</text><path d="M640,94.4453 L650,94.4453 C665,94.4453 665,94.4453 680,94.4453 L690,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M268,516.6719 L278,516.6719 C293,516.6719 293,94.4453 308,94.4453 L318,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="265" x="318" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="245" x="328" y="155.5889">Separate from the RAM controller</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="283" x="633" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="263" x="643" y="155.5889">DDR controller is a separate IP block</text><path d="M583,150.7422 L593,150.7422 C608,150.7422 608,150.7422 623,150.7422 L633,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M268,516.6719 L278,516.6719 C293,516.6719 293,150.7422 308,150.7422 L318,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="519" x="318" y="273.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="499" x="328" y="296.3311">Transparently handles all memory access from Load/Store instuctions</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="477" x="887" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="353" x="897" y="211.8857">Maps memory accesses using virtual addresses to</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100" x="1254" y="211.8857">system RAM</text><path d="M837,291.4844 L847,291.4844 C862,291.4844 862,207.0391 877,207.0391 L887,207.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="606" x="887" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="419" x="897" y="268.1826">Maps accesses using virtual addresses to memory-mapped</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="163" x="1320" y="268.1826">peripheral hardware</text><path d="M837,291.4844 L847,291.4844 C862,291.4844 862,263.3359 877,263.3359 L887,263.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="166" x="887" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="897" y="324.4795">Handles permissions</text><path d="M837,291.4844 L847,291.4844 C862,291.4844 862,319.6328 877,319.6328 L887,319.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="797" x="887" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="897" y="380.7764">Generates an exception (</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1079" y="380.7764">page fault</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="1163" y="380.7764">) on an</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="114" x="1215" y="380.7764">invalid access</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="341" x="1333" y="380.7764">(Unmapped address or insufficient permissions)</text><path d="M837,291.4844 L847,291.4844 C862,291.4844 862,375.9297 877,375.9297 L887,375.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M268,516.6719 L278,516.6719 C293,516.6719 293,291.4844 308,291.4844 L318,291.4844 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="368" x="318" y="695.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="296" x="328" y="718.5576">operates on basic units of memory called</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="628" y="718.5576">pages</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="458" x="736" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="10" x="746" y="437.0732">A</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="760" y="437.0732">page</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="381" x="803" y="437.0732">is a unit of memory size and aligned at the page size.</text><path d="M686,713.7109 L696,713.7109 C711,713.7109 711,432.2266 726,432.2266 L736,432.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="257" x="736" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="76" x="746" y="605.9639">Page size</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="826" y="605.9639">varies by architecture</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="478" x="1043" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="458" x="1053" y="493.3701">Some architectures have configurable page sizes (at build time)</text><path d="M993,601.1172 L1003,601.1172 C1018,601.1172 1018,488.5234 1033,488.5234 L1043,488.5234 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="169" x="1043" y="611.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="1053" y="634.1123">Common page sizes:</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="83" x="1262" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="1272" y="549.667">ARM - 4k</text><path d="M1212,629.2656 L1222,629.2656 C1237,629.2656 1237,544.8203 1252,544.8203 L1262,544.8203 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="149" x="1262" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1272" y="605.9639">ARM64 - 4k or 64k</text><path d="M1212,629.2656 L1222,629.2656 C1237,629.2656 1237,601.1172 1252,601.1172 L1262,601.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="207" x="1262" y="639.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="1272" y="662.2607">MIPS - widely configurable</text><path d="M1212,629.2656 L1222,629.2656 C1237,629.2656 1237,657.4141 1252,657.4141 L1262,657.4141 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="76" x="1262" y="695.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1272" y="718.5576">x86 - 4k</text><path d="M1212,629.2656 L1222,629.2656 C1237,629.2656 1237,713.7109 1252,713.7109 L1262,713.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M993,601.1172 L1003,601.1172 C1018,601.1172 1018,629.2656 1033,629.2656 L1043,629.2656 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M686,713.7109 L696,713.7109 C711,713.7109 711,601.1172 726,601.1172 L736,601.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="665" x="736" y="780.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="10" x="746" y="803.0029">A</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="92" x="760" y="803.0029">page frame</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="539" x="852" y="803.0029">, or frame, refers to a page-sized and page-aligned physical memory block.</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="322" x="1451" y="780.0078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="1461" y="803.0029">Difference between page and page frame</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="423" x="1823" y="751.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="403" x="1833" y="774.8545">A page is somewhat abstract, where a frame is concrete</text><path d="M1773,798.1563 L1783,798.1563 C1798,798.1563 1798,770.0078 1813,770.0078 L1823,770.0078 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="878" x="1823" y="808.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="1833" y="831.1514">In the kernel, the abbreviation</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="2058" y="831.1514">*pfn</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="2092" y="831.1514">*, for</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="158" x="2132" y="831.1514">page frame number</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="401" x="2290" y="831.1514">, is often used to refer to refer to physical page frames.</text><path d="M1773,798.1563 L1783,798.1563 C1798,798.1563 1798,826.3047 1813,826.3047 L1823,826.3047 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M1401,798.1563 L1411,798.1563 C1426,798.1563 1426,798.1563 1441,798.1563 L1451,798.1563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M686,713.7109 L696,713.7109 C711,713.7109 711,798.1563 726,798.1563 L736,798.1563 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="222" x="736" y="920.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="746" y="943.7451">The MMU operates on pages</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="416" x="1008" y="864.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="396" x="1018" y="887.4482">a memory map for process will contain many mappings</text><path d="M958,938.8984 L968,938.8984 C983,938.8984 983,882.6016 998,882.6016 L1008,882.6016 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="313" x="1008" y="920.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="1018" y="943.7451">A mapping often convers multiple pages</text><path d="M958,938.8984 L968,938.8984 C983,938.8984 983,938.8984 998,938.8984 L1008,938.8984 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="564" x="1008" y="977.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="544" x="1018" y="1000.042">The TLB holds each mapping (Virtual address, Physical address, permissions)</text><path d="M958,938.8984 L968,938.8984 C983,938.8984 983,995.1953 998,995.1953 L1008,995.1953 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M686,713.7109 L696,713.7109 C711,713.7109 711,938.8984 726,938.8984 L736,938.8984 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M268,516.6719 L278,516.6719 C293,516.6719 293,713.7109 308,713.7109 L318,713.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[987675f1ba9f17c8a098e128844cdf9d]
@startmindmap
+ MMU (Memory-Management Unit)
++ Sits between the CPU core and memory
++ Most often part of the physical CPU itself.
+++ On ARM, it's part of the licensed core.
++ Separate from the RAM controller
+++ DDR controller is a separate IP block
++ Transparently handles all memory access from Load/Store instuctions
+++ Maps memory accesses using virtual addresses to **system RAM**
+++ Maps accesses using virtual addresses to memory-mapped **peripheral hardware**
+++ Handles permissions
+++ Generates an exception (**page fault**) on an **invalid access** (Unmapped address or insufficient permissions)
++ operates on basic units of memory called **pages**
+++ A **page** is a unit of memory size and aligned at the page size.
+++ **Page size** varies by architecture
++++ Some architectures have configurable page sizes (at build time)
++++ Common page sizes:
+++++ ARM - 4k
+++++ ARM64 - 4k or 64k
+++++ MIPS - widely configurable
+++++ x86 - 4k
+++ A **page frame**, or frame, refers to a page-sized and page-aligned physical memory block.
++++ Difference between page and page frame
+++++ A page is somewhat abstract, where a frame is concrete
+++++ In the kernel, the abbreviation ***pfn***, for **page frame number**, is often used to refer to refer to physical page frames.
+++ The MMU operates on pages
++++ a memory map for process will contain many mappings
++++ A mapping often convers multiple pages
++++ The TLB holds each mapping (Virtual address, Physical address, permissions)
@endmindmap

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>